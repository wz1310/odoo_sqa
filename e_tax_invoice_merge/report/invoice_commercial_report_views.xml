<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_invoice_commercial_document">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <div class="header">
                    <div class="row">
                        <table style="width: 100%;border-bottom: solid 2px black;">
                            <tr>
                                <td rowspan="2" style="width: 10%;">
                                    <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="max-height: 45px;" alt="Logo"/>
                                </td>
                                <td rowspan="2" style="font-size: 14px; width: 70%;">
                                    <!--span style="font-size: 14px;" t-field="o.company_id.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;name&quot;], &quot;no_marker&quot;: true}"/-->
                                    <span style="font-size: 20px;text-transform: uppercase;font-weight:bolder;" t-field="o.company_id.partner_id.name"/><br/>
                                    <span t-field="o.company_id.partner_id.street"/><br/>
                                    <t t-if="o.company_id.partner_id.phone">
                                        Telp. <span t-field="o.company_id.partner_id.phone"/>
                                    </t>
                                    <!-- <t t-if="o.company_id.partner_id.phone">
                                        Fax. <span t-field="o.company_id.partner_id.phone"/>
                                    </t> -->
                                    <t t-if="o.company_id.partner_id.vat">
                                        NPWP. <span t-field="o.company_id.partner_id.vat"/>
                                    </t>
                                </td>
                                <td style="width: 20%;">
                                    <t t-if="o.company_id.iso_customer_invoice">
                                        <span class="text-left" style="font-size: 10px;">
                                            Doc. No. : <t t-esc="o.company_id.iso_customer_invoice"/><br/>
                                        </span>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h4 class="text-right">
                                    <t t-if="o.state not in ['posted']">
                                        <t t-esc="dict(o._fields['state'].selection).get(o.state)"/>
                                    </t>
                                    Sales Invoice</h4>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="page" style="font-size: 11px;">
                    <style>
                        .table th,
                        .table td {
                            padding: 1px;
                        }
                        .th-0 {
                            border-top: 1px solid black !important;
                            border-bottom: 1px solid black !important;
                            border-left: 1px solid black;
                            border-right: 1px solid black;
                            text-align:center;
                        }
                        .td-1 {
                            border-top: 1px solid black !important;
                            border-bottom: 1px solid black;
                            border-left: 1px solid black;
                        }
                        .td-2 {
                            border-top: 1px solid black !important;
                            border-bottom: 1px solid black;
                            border-left: none !important;
                            border-right: none !important;
                        }
                        .td-3 {
                            border-top: 1px solid black !important;
                            border-bottom: 1px solid black;
                            border-left: none !important;
                            border-right: 1px solid black;
                        }

                        .td-4 {
                            border-top: none !important;
                            border-bottom: none !important;
                            border-left: 1px solid black;
                            border-right: 1px solid black;
                        }
                        .no-border {
                            border: none !important;
                        }
                        .td-1-top {
                            border-top: 1px solid black !important;
                            border-left: 1px solid black;
                        }
                    </style>
                    <div class="row">
                        <div style="width:50%;font-family:Arial;font-size:14px;">
                            <div>
                                Invoice : <span t-field="o.partner_id.name"/><br/>
                                <t t-if="o.partner_id.street">
                                <span t-field="o.partner_id.street"/>
                                </t>
                                <br/>
                                <t t-if="o.partner_id.city">
                                    <span t-field="o.partner_id.city"/>
                                </t>
                                <t t-if="o.partner_id.zip">
                                    , <span t-field="o.partner_id.zip"/>
                                </t>
                                <t t-else="">
                                </t>
                                <br/>
                                 NPWP : <span t-field="o.partner_id.vat"/>
                            </div>
                            <!-- <div style="margin-top:100px;">
                                NPWP : <span t-field="o.partner_id.vat"/>
                            </div> -->
                        </div>
                        <div style="width:50%">
                            <table class="table" style="width:100%;font-family:Arial;font-size:14px;">
                                <tr>
                                    <td class="td-1" nowrap="nowrap">NO INVOICE</td>
                                    <td class="td-2" nowrap="nowrap">:</td>
                                    <td colspan="4" class="td-3" nowrap="nowrap"><span t-field="o.name"/></td>
                                </tr>
                                <tr>
                                    <td class="td-1" nowrap="nowrap">TOP</td>
                                    <td class="td-2" nowrap="nowrap">:</td>
                                    <td class="td-3" nowrap="nowrap"><span t-field="o.invoice_payment_term_id"/></td>
                                    <td class="td-2" nowrap="nowrap">TANGGAL</td>
                                    <td class="td-2" nowrap="nowrap">:</td>
                                    <td class="td-3" nowrap="nowrap"><span t-field="o.invoice_date"/></td>
                                </tr>
                                <tr>
                                    <td class="td-1" nowrap="nowrap">MATA UANG</td>
                                    <td class="td-2" nowrap="nowrap">:</td>
                                    <td class="td-3" nowrap="nowrap"><span t-field="o.currency_id"/></td>
                                    <td class="td-2" nowrap="nowrap">FP NO</td>
                                    <td class="td-2" nowrap="nowrap">:</td>
                                    <td class="td-3" nowrap="nowrap"><span t-field="o.e_tax_invoice_id"/></td>
                                </tr>
                                <!-- <tr>
                                    <td class="td-1">Salesman</td>
                                    <td class="td-2">:</td>
                                    <td colspan="4" class="td-3"><span><![CDATA[&nbsp;]]></span></td>
                                </tr> -->
                            </table>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 10px;font-family:Arial;font-size:14px;">
                        <table class="table" style="width: 100%; border: 1px solid black;">
                            <thead>
                                <tr>
                                    <th class="th-0" style="width: 5%;">
                                        NO
                                    </th>
                                    <th class="th-0" style="width: 45%;">
                                        PRODUK
                                    </th>
                                    <th class="th-0" style="width: 10%;">
                                        QTY
                                    </th>
                                    <th class="th-0" style="width: 10%;">
                                        UNIT
                                    </th>
                                    <th class="th-0" style="width: 15%;">
                                        HARGA
                                    </th>
                                    <!-- <th class="th-0" style="width: 15%;">
                                        Diskon (Rp.)
                                    </th> -->
                                    <th class="th-0" style="width: 15%;">
                                        JUMLAH
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="idx" t-value="1"/>
                                <t t-foreach="o.invoice_merge_line_ids" t-as="line">
                                    <tr>
                                        <td class="td-4 text-center">
                                            <span t-esc="idx"/>
                                        </td>
                                        <td class="td-4 text-left">
                                            <span t-esc="line.name"/>
                                        </td>
                                        <td class="td-4 text-right">
                                            <span t-esc="o.get_format_currency(line.quantity)"/>
                                        </td>
                                        <td class="td-4 text-center">
                                            <span t-esc="line.product_uom_id.name"/>
                                        </td>
                                        <td class="text-right td-4">
                                            <span t-esc="o.get_format_currency(line.price_unit)"/>
                                        </td>
                                        <!-- <td class="text-right td-4">
                                            <span t-esc="o.get_format_currency(line.display_discount)"/>
                                        </td> -->
                                        <td class="text-right td-4">
                                            <span t-esc="o.get_format_currency(line.price_subtotal)"/>
                                        </td>
                                    </tr>
                                    <t t-set="idx" t-value="idx + 1"/>
                                </t>
                                <tr>
                                  <td class="text-left td-1-top" style="font-size:12px;" colspan="3" rowspan="4">
                                    Terbilang : <span t-esc="o.get_amount_to_text(o.amount_total)"/> Rupiah<br/><br/>
                                    Deskripsi :<br/>
                                    - Barang yang sudah dibeli tidak dapat dikembalikan/tukar<br/>
                                    - Pembayaran dengan Cek/Giro dianggap lunas apabila Cek/Giro telah dicairkan/diuangkan<br/>
                                    - Pembayaran harap ditransfer ke
                                    <t t-if="o.partner_id.code == 'C-IDR-003' and o.company_id.code_plant == '4'">
                                      HSBC 050-294875-068
                                    </t>
                                    <t t-elif="o.partner_id.code == 'C-IDR-002' and o.company_id.code_plant == '1'">
                                      HSBC 050-048511-001
                                    </t>
                                    <t t-else="">
                                      <t t-esc="o.company_id.bank_transfer"></t>
                                    </t>
                                    <br/>
                                  </td>
                                  <td class="text-left td-1-top" colspan="2">SUB TOTAL</td>
                                  <td class="text-right td-1-top">
                                      <span t-esc="o.get_format_currency(o.amount_undiscount)"/>
                                  </td>
                                </tr>
                                <tr>
                                  <td class="text-left td-1-top" colspan="2">DISCOUNT</td>
                                  <td class="text-right td-1-top">
                                      <span t-esc="o.get_format_currency(o.amount_discount)"/>
                                  </td>
                                </tr>
                                <tr>
                                  <td class="text-left td-1-top" colspan="2">PPN</td>
                                  <td class="text-right td-1-top">
                                      <span t-esc="o.get_format_currency(o.amount_tax)"/>
                                  </td>
                                </tr>
                                <tr>
                                  <td class="text-left td-1-top" colspan="2">TOTAL INVOICE</td>
                                  <td class="text-right td-1-top">
                                      <span t-esc="o.get_format_currency(o.amount_total)"/>
                                  </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div style="font-size: 11px;">
                        <style>
                            .td-1 {
                                border-top: 1px solid black !important;
                                border-bottom: 1px solid black;
                                border-left: 1px solid black;
                            }
                            .td-2 {
                                border-top: 1px solid black !important;
                                border-bottom: 1px solid black;
                                border-left: none !important;
                                border-right: none !important;
                            }
                            .td-3 {
                                border-top: 1px solid black !important;
                                border-bottom: 1px solid black;
                                border-left: none !important;
                                border-right: 1px solid black;
                            }

                            .td-4 {
                                border-top: none !important;
                                border-bottom: none !important;
                                border-left: 1px solid black;
                                border-right: 1px solid black;
                            }
                            .no-border {
                                border: none !important;
                            }
                            table {
                                page-break-inside:avoid;
                                page-break-after:auto
                                }
                        </style>
                        <table style="width: 100%;font-family:Arial;font-size:14px;">
                            <!--tr>
                                <td colspan="3" rowspan="5" style="width: 60%">
                                    Terbilang : <span t-esc="o.get_amount_to_text(o.amount_total)"/> Rupiah<br/>
                                    <br/>
                                    Deskripsi :<br/>
                                    - Barang yang sudah dibeli tidak dapat dikembalikan/tukar<br/>
                                    - Pembayaran dengan Cek/Giro dianggap lunas apabila Cek/Giro telah dicairkan/diuangkan<br/>
                                    - Pembayaran harap ditransfer ke UOB Bank <br/>
                                </td>
                                <td class="text-right">Sub Total :</td>
                                <td class="text-right"><span t-esc="o.get_format_currency(o.amount_undiscount,total=True)"/></td>
                            </tr>
                            <tr>
                                <td class="text-right">Discount :</td>
                                <td class="text-right"><span t-esc="o.get_format_currency(o.amount_discount,total=True)"/></td>
                            </tr>
                            <tr>
                                <td class="text-right">Ppn :</td>
                                <td class="text-right"><span t-esc="o.get_format_currency(o.amount_tax,total=True)"/></td>
                            </tr>
                            <tr>
                                <td class="td-1 text-right" style="padding:5px;"><h6>Total Invoice :</h6></td>
                                <td class="td-3 text-right" style="padding:5px;"><h6><span t-esc="o.get_format_currency(o.amount_total,total=True)"/></h6></td>
                            </tr-->
                            <tr>
                                <td/>
                                <td/>
                            </tr>
                            <tr>
                                <td class="text-center">Approved by,</td>
                                <td class="text-center"/>
                                <td class="text-center"/>
                                <td class="text-right"/>
                                <td class="text-right"/>
                            </tr>
                            <tr style="height: 100px;">
                                <td/>
                                <td/>
                                <td/>
                                <!--td rowspan="2" colspan="2" class="text-right">
                                    <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 150)" style="width:300px;height:50px;" alt="Barcode"/>
                                </td-->
                                <td rowspan="2" colspan="2" class="text-right" style="width:70%"></td>
                            </tr>
                            <tr>
                                <td class="text-center"> (   Finance Dept.   ) </td>
                                <td/>
                                <td/>
                                <td/>
                            </tr>
                        </table>
                    </div>
                    <!--div style="float:left;">
                        Page: <span class="page"/> / <span class="topage"/>
                    </div-->
                </div>
                <!--div class="footer" style="font-size: 11px;">
                    <div style="float:left;">
                        Page: <span class="page"/> / <span class="topage"/>
                    </div>
                </div-->
            </t>
        </t>
    </template>

    <template id="report_invoice_commercial">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="e_tax_invoice_merge.report_invoice_commercial_document" t-lang="lang"/>
            </t>
        </t>
    </template>

    <report
        id="account_invoices"
        model="etax.invoice.merge"
        string="Invoices"
        report_type="qweb-pdf"
        name="e_tax_invoice_merge.report_invoice_commercial"
        file="e_tax_invoice_merge.report_invoice_commercial"
        print_report_name="'INV Commercial - %s - %s' % (object.partner_id.name or '', object.name)"
        groups="account.group_account_invoice"
    />
</odoo>
